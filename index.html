<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ„ è–èª•æŠ½æŠ½æ¨‚ ğŸ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Fredoka', 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #d63031 0%, #e17055 50%, #d63031 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* æ‰‹ç¹ªé¢¨æ ¼èƒŒæ™¯è£é£¾ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 20% 80%, rgba(255, 107, 107, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 184, 108, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 234, 167, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* å¯æ„›é›ªèŠ± */
        .snowflake {
            position: fixed;
            top: -20px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.9), 0 0 20px rgba(255, 255, 255, 0.6);
            animation: fall linear forwards;
            z-index: 1;
            user-select: none;
            pointer-events: none;
            font-size: 20px;
        }

        @keyframes fall {
            to {
                transform: translateY(105vh) rotate(360deg);
            }
        }

        /* æ‰‹ç¹ªé¢¨æ ¼å®¹å™¨ */
        .hand-drawn-container {
            background: #fffef9;
            border-radius: 30px;
            box-shadow:
                0 8px 30px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            border: 3px solid #8b4513;
            overflow: hidden;
        }

        /* æ‰‹ç¹ªé¢¨æ ¼æ¨™é¡Œ */
        .hand-drawn-title {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            border-bottom: 5px solid #ffd93d;
            position: relative;
            border-radius: 27px 27px 0 0;
        }

        .hand-drawn-title::before {
            content: 'â„';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;
            animation: float 3s ease-in-out infinite;
        }

        .hand-drawn-title::after {
            content: 'â„';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;
            animation: float 3s ease-in-out infinite 1.5s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(-50%) rotate(0deg);
            }

            50% {
                transform: translateY(-60%) rotate(10deg);
            }
        }

        /* æ‰‹ç¹ªæŒ‰éˆ•é¢¨æ ¼ */
        .hand-drawn-btn {
            border: 3px solid #8b4513;
            border-radius: 20px;
            box-shadow:
                0 4px 0 #6d3610,
                0 8px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.2s;
            transform: rotate(-1deg);
        }

        .hand-drawn-btn:hover {
            transform: rotate(0deg) translateY(-2px);
            box-shadow:
                0 6px 0 #6d3610,
                0 10px 25px rgba(0, 0, 0, 0.25);
        }

        .hand-drawn-btn:active {
            transform: rotate(0deg) translateY(2px);
            box-shadow:
                0 2px 0 #6d3610,
                0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* æŠ½çç®±æ–æ™ƒå‹•ç•« */
        .shaking {
            animation: shake 0.6s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-2px, 0, 0) rotate(-3deg);
            }

            20%,
            80% {
                transform: translate3d(3px, 0, 0) rotate(5deg);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-5px, 0, 0) rotate(-5deg);
            }

            40%,
            60% {
                transform: translate3d(5px, 0, 0) rotate(5deg);
            }
        }

        /* æ•¸å­—å½ˆå‡ºå‹•ç•« */
        .number-pop {
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop {
            0% {
                transform: scale(0.3) rotate(-10deg);
                opacity: 0;
            }

            50% {
                transform: scale(1.1) rotate(5deg);
            }

            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* æ‰‹ç¹ªé¢¨æ ¼è¼¸å…¥æ¡† */
        .hand-drawn-input {
            border: 3px solid #8b4513;
            border-radius: 15px;
            background: #fff;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .hand-drawn-input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow:
                inset 0 2px 5px rgba(0, 0, 0, 0.1),
                0 0 0 3px rgba(255, 107, 107, 0.2);
        }

        /* æ‰‹ç¹ªé¢¨æ ¼å¾½ç«  */
        .hand-drawn-badge {
            background: #fffef9;
            border: 3px solid #ff6b6b;
            border-radius: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            transform: rotate(2deg);
        }

        /* æ­·å²ç´€éŒ„å¡ç‰‡ */
        .history-card {
            background: linear-gradient(135deg, #fff5eb 0%, #ffe9d6 100%);
            border: 2px solid #ffd93d;
            border-radius: 12px;
            transform: rotate(-1deg);
            transition: transform 0.2s;
        }

        .history-card:hover {
            transform: rotate(0deg) scale(1.05);
        }

        /* è£é£¾æ€§å…ƒç´  */
        .deco-tree {
            position: fixed;
            font-size: 60px;
            opacity: 0.3;
            animation: sway 4s ease-in-out infinite;
            z-index: 1;
        }

        .deco-snowman {
            position: fixed;
            font-size: 50px;
            opacity: 0.25;
            animation: bounce-slow 3s ease-in-out infinite;
            z-index: 1;
        }

        .deco-gift {
            position: fixed;
            font-size: 45px;
            opacity: 0.3;
            animation: wiggle 2.5s ease-in-out infinite;
            z-index: 1;
        }

        .deco-star {
            position: fixed;
            font-size: 35px;
            opacity: 0.4;
            animation: twinkle 2s ease-in-out infinite;
            z-index: 1;
        }

        .deco-bell {
            position: fixed;
            font-size: 40px;
            opacity: 0.3;
            animation: swing 2s ease-in-out infinite;
            z-index: 1;
        }

        .deco-reindeer {
            position: fixed;
            font-size: 55px;
            opacity: 0.25;
            animation: float-lr 5s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes sway {

            0%,
            100% {
                transform: rotate(-5deg);
            }

            50% {
                transform: rotate(5deg);
            }
        }

        @keyframes bounce-slow {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(-3deg);
            }

            50% {
                transform: rotate(3deg);
            }
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.2;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.2);
            }
        }

        @keyframes swing {

            0%,
            100% {
                transform: rotate(-8deg);
            }

            50% {
                transform: rotate(8deg);
            }
        }

        @keyframes float-lr {

            0%,
            100% {
                transform: translateX(0) translateY(0);
            }

            50% {
                transform: translateX(10px) translateY(-8px);
            }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #fff5eb;
            border-radius: 10px;
        }

        /* ç¦®ç‰©ç›’å‹•ç•« */
        .gift-bounce {
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* ç…™ç«ç‰¹æ•ˆ */
        .firework-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: firework-explode 1.2s ease-out forwards;
            box-shadow: 0 0 20px currentColor, 0 0 40px currentColor;
        }

        @keyframes firework-explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0.5);
                opacity: 0;
            }
        }

        .firework-spark {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            box-shadow: 0 0 15px currentColor, 0 0 30px currentColor, 0 0 45px currentColor;
            animation: spark-fade 1s ease-out forwards;
        }

        @keyframes spark-fade {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(0);
                opacity: 0;
            }
        }
    </style>
</head>

<body class="p-2">
    <!-- ç…™ç«å®¹å™¨ -->
    <div id="fireworkContainer" class="firework-container"></div>

    <!-- è–èª•è£é£¾å…ƒç´  -->
    <!-- è–èª•æ¨¹ -->
    <div class="deco-tree" style="bottom: 20px; left: 20px;">ğŸ„</div>
    <div class="deco-tree" style="top: 100px; right: 30px;">ğŸ„</div>
    <div class="deco-tree" style="bottom: 150px; right: 80px;">ğŸ„</div>

    <!-- é›ªäºº -->
    <div class="deco-snowman" style="top: 50px; left: 80px;">â›„</div>
    <div class="deco-snowman" style="bottom: 200px; left: 150px;">â›„</div>

    <!-- ç¦®ç‰©ç›’ -->
    <div class="deco-gift" style="top: 200px; left: 50px;">ğŸ</div>
    <div class="deco-gift" style="bottom: 80px; right: 150px;">ğŸ</div>
    <div class="deco-gift" style="top: 300px; right: 100px;">ğŸ</div>

    <!-- æ˜Ÿæ˜Ÿ -->
    <div class="deco-star" style="top: 80px; left: 200px;">â­</div>
    <div class="deco-star" style="top: 250px; right: 50px;">â­</div>
    <div class="deco-star" style="bottom: 120px; left: 100px;">â­</div>
    <div class="deco-star" style="top: 150px; right: 200px;">âœ¨</div>

    <!-- è–èª•éˆ´éº -->
    <div class="deco-bell" style="top: 180px; left: 30px;">ğŸ””</div>
    <div class="deco-bell" style="bottom: 50px; right: 50px;">ğŸ””</div>

    <!-- é¦´é¹¿ -->
    <div class="deco-reindeer" style="top: 120px; right: 120px;">ğŸ¦Œ</div>

    <div class="max-w-xl mx-auto hand-drawn-container relative z-10">
        <!-- Header -->
        <div class="hand-drawn-title p-4 text-white text-center">
            <h1 class="text-2xl md:text-3xl font-black tracking-wide drop-shadow-lg"
                style="text-shadow: 3px 3px 0 rgba(0,0,0,0.2);">
                ğŸ¦Œ 12æœˆè–èª•æŠ½æŠ½æ¨‚ ğŸ
            </h1>
            <p class="text-xs mt-1 opacity-90 font-medium">è–èª•å¥‡è¹Ÿï¼å¥½é‹æ»¿æ»¿ï¼</p>
        </div>

        <div class="p-4 space-y-3">
            <!-- Settings Area -->
            <div
                class="flex flex-col md:flex-row gap-2 items-end bg-gradient-to-br from-orange-50 to-yellow-50 p-3 rounded-2xl border-3 border-dashed border-orange-300">
                <div class="flex-1 space-y-2 w-full">
                    <label class="block text-sm font-bold text-orange-800 tracking-wide">ğŸ¯ è¨­å®šç¸½çƒæ•¸ (1 - N)</label>
                    <input type="number" id="maxNumber" value="19" min="1" max="1000"
                        class="hand-drawn-input w-full px-4 py-3 font-bold text-gray-700 text-lg">
                </div>
                <button onclick="resetPool()"
                    class="hand-drawn-btn w-full md:w-auto px-6 py-3 bg-gradient-to-br from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 text-white font-bold text-lg">
                    ğŸ”„ é‡ç½®ç®±å­
                </button>
            </div>

            <!-- Drawing Interaction Area -->
            <div class="relative py-2 flex flex-col items-center min-h-[260px] justify-center">
                <!-- Status Badge -->
                <div class="hand-drawn-badge absolute top-2 right-2 px-4 py-2 text-sm font-bold text-red-600">
                    ğŸª ç®±å…§å°šæœ‰ï¼š<span id="remainingCount" class="text-2xl">19</span> é¡†çƒ
                </div>

                <!-- Box Icon / Animation Container -->
                <div id="boxWrapper" class="relative gift-bounce">
                    <div id="drawBox" class="cursor-pointer transition-transform hover:scale-110 active:scale-95">
                        <img src="logo.png" alt="æŠ½ç±¤ç®±Logo" class="w-36 h-36 object-contain drop-shadow-2xl"
                            style="filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));">
                    </div>

                    <!-- Number Result Overlay -->
                    <div id="resultOverlay"
                        class="absolute inset-0 flex items-center justify-center pointer-events-none hidden">
                        <div id="resultNumber"
                            class="text-8xl font-black text-red-600 drop-shadow-2xl number-pop bg-yellow-100 rounded-full w-40 h-40 flex items-center justify-center border-4 border-red-500"
                            style="box-shadow: 0 0 30px rgba(255,107,107,0.6), inset 0 4px 10px rgba(255,255,255,0.5);">
                            ?</div>
                    </div>
                </div>

                <!-- Decision Panel (Shows after drawing) -->
                <div id="decisionPanel"
                    class="w-full mt-8 space-y-4 opacity-0 pointer-events-none transition-opacity duration-300">
                    <p class="text-center text-gray-700 font-bold text-lg">
                        æ‚¨è¦å¦‚ä½•è™•ç†è™Ÿç¢¼
                        <span id="currentNumDisplay"
                            class="text-red-600 font-black text-4xl inline-block px-3 py-1 bg-yellow-100 rounded-2xl border-3 border-red-400"></span>
                        ï¼Ÿ
                    </p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="handleDecision(true)"
                            class="hand-drawn-btn bg-gradient-to-br from-red-400 to-red-500 hover:from-red-500 hover:to-red-600 text-white py-4 font-black text-lg">
                            â¤ï¸ å‘½ä¸­è¨»å®š
                        </button>
                        <button onclick="handleDecision(false)"
                            class="hand-drawn-btn bg-gradient-to-br from-green-400 to-green-500 hover:from-green-500 hover:to-green-600 text-white py-4 font-black text-lg">
                            ğŸ”„ é‡æ–°é…å°
                        </button>
                    </div>
                </div>

                <!-- Main Draw Button -->
                <button id="drawBtn" onclick="startDraw()"
                    class="hand-drawn-btn w-60 py-3 bg-gradient-to-br from-yellow-400 via-yellow-500 to-orange-500 hover:from-yellow-500 hover:via-yellow-600 hover:to-orange-600 text-white text-lg font-black -mt-4"
                    style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                    ğŸ æŠ½å‡ºè–èª•é©šå–œï¼
                </button>
            </div>

            <!-- History -->
            <div class="border-t-4 border-dashed border-orange-300 pt-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-black text-xl text-orange-800 flex items-center">
                        <span class="text-2xl mr-2">ğŸ“œ</span>
                        æœ€è¿‘æŠ½ç±¤ç´€éŒ„
                    </h3>
                    <button onclick="clearHistory()"
                        class="text-sm text-orange-400 hover:text-red-500 transition-colors font-bold px-3 py-1 rounded-full border-2 border-orange-300 hover:border-red-400">
                        ğŸ—‘ï¸ æ¸…é™¤
                    </button>
                </div>
                <div id="historyList" class="flex flex-wrap gap-2 max-h-20 overflow-y-auto custom-scrollbar p-1">
                    <div class="text-gray-400 text-sm italic w-full text-center py-4">âœ¨ å°šç„¡ç´€éŒ„ âœ¨</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Feedback Toast -->
    <div id="toast"
        class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full text-sm font-medium shadow-2xl opacity-0 transition-opacity pointer-events-none z-50">
        æç¤ºè¨Šæ¯
    </div>

    <script>
        let pool = [];
        let history = [];
        let isAnimating = false;
        let currentDrawnIndex = -1;
        let currentDrawnNumber = -1;

        // Init
        window.onload = () => {
            resetPool();
            startSnow();
        };

        function startSnow() {
            setInterval(createSnowflake, 300);
        }

        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.textContent = ['â„', 'â…', 'â†'][Math.floor(Math.random() * 3)];
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
            snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
            snowflake.style.opacity = Math.random() * 0.5 + 0.3;

            document.body.appendChild(snowflake);

            // Remove after animation
            setTimeout(() => {
                snowflake.remove();
            }, 5000);
        }

        function resetPool() {
            const max = parseInt(document.getElementById('maxNumber').value);
            if (isNaN(max) || max < 1) {
                showToast("è«‹è¼¸å…¥æœ‰æ•ˆçš„æ­£æ•´æ•¸ï¼");
                return;
            }
            pool = Array.from({ length: max }, (_, i) => i + 1);
            history = [];
            currentDrawnIndex = -1;
            currentDrawnNumber = -1;

            updateUI();
            resetView();
            showToast(`å·²é‡ç½®ç®±å­ï¼Œå…± ${max} å€‹è™Ÿç¢¼ã€‚`);
        }

        function updateUI() {
            document.getElementById('remainingCount').textContent = pool.length;
            renderHistory();
        }

        function resetView() {
            document.getElementById('resultOverlay').classList.add('hidden');
            document.getElementById('decisionPanel').classList.add('opacity-0', 'pointer-events-none');
            document.getElementById('drawBtn').classList.remove('hidden');
            document.getElementById('drawBox').classList.remove('shaking');
        }

        function startDraw() {
            if (isAnimating) return;
            if (pool.length === 0) {
                showToast("ç®±å­å·²ç¶“ç©ºäº†ï¼");
                return;
            }

            isAnimating = true;
            const drawBtn = document.getElementById('drawBtn');
            const drawBox = document.getElementById('drawBox');
            const resultOverlay = document.getElementById('resultOverlay');
            const resultNumber = document.getElementById('resultNumber');

            // UI feedback
            drawBtn.classList.add('hidden');
            drawBox.classList.add('shaking');

            // Rolling effect
            let ticks = 0;
            const maxTicks = 20;
            const interval = setInterval(() => {
                const tempNum = pool[Math.floor(Math.random() * pool.length)];
                resultNumber.textContent = tempNum;
                resultOverlay.classList.remove('hidden');
                ticks++;

                if (ticks >= maxTicks) {
                    clearInterval(interval);
                    finishDraw();
                }
            }, 60);
        }

        function finishDraw() {
            currentDrawnIndex = Math.floor(Math.random() * pool.length);
            currentDrawnNumber = pool[currentDrawnIndex];

            // Display result
            document.getElementById('resultNumber').textContent = currentDrawnNumber;
            document.getElementById('currentNumDisplay').textContent = currentDrawnNumber;

            // Stop shaking
            document.getElementById('drawBox').classList.remove('shaking');

            // ğŸ† è§¸ç™¼ç…™ç«ç‰¹æ•ˆï¼
            launchFireworks();

            // Show decision panel
            const panel = document.getElementById('decisionPanel');
            panel.classList.remove('opacity-0', 'pointer-events-none');

            isAnimating = false;
        }

        function handleDecision(shouldRemove) {
            if (currentDrawnNumber === -1) return;

            if (shouldRemove) {
                pool.splice(currentDrawnIndex, 1);
                showToast(`è™Ÿç¢¼ ${currentDrawnNumber} å‘½ä¸­è¨»å®šï¼`);
                addToHistory(currentDrawnNumber, "å‘½ä¸­è¨»å®š");
            } else {
                showToast(`è™Ÿç¢¼ ${currentDrawnNumber} é‡æ–°é…å°`);
                addToHistory(currentDrawnNumber, "é‡æ–°é…å°");
            }

            // Cleanup state for next draw
            currentDrawnNumber = -1;
            currentDrawnIndex = -1;

            updateUI();
            resetView();
        }

        function addToHistory(num, action) {
            const colorClass = action === "å‘½ä¸­è¨»å®š" ? "text-red-500" : "text-green-500";
            history.unshift({ num, action, colorClass, time: new Date().toLocaleTimeString() });
            if (history.length > 30) history.pop();
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            if (history.length === 0) {
                list.innerHTML = '<div class="text-gray-400 text-sm italic w-full text-center py-4">âœ¨ å°šç„¡ç´€éŒ„ âœ¨</div>';
                return;
            }

            list.innerHTML = history.map(h => `
                <div class="history-card px-4 py-2 flex flex-col items-center shadow-sm hover:shadow-md">
                    <span class="font-black text-gray-800 text-xl">${h.num}</span>
                    <span class="${h.colorClass} font-bold text-xs">${h.action === "å‘½ä¸­è¨»å®š" ? "â¤ï¸" : "ğŸ”„"} ${h.action}</span>
                </div>
            `).join('');
        }

        function clearHistory() {
            history = [];
            renderHistory();
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 2000);
        }

        // Clicking box triggers draw if not waiting for decision
        document.getElementById('drawBox').addEventListener('click', () => {
            const panel = document.getElementById('decisionPanel');
            if (!isAnimating && panel.classList.contains('opacity-0')) {
                startDraw();
            }
        });

        // ğŸ† ç…™ç«ç‰¹æ•ˆå‡½æ•¸
        function launchFireworks() {
            const container = document.getElementById('fireworkContainer');
            const colors = ['#ff6b6b', '#ffd93d', '#6bcf7f', '#4ecdc4', '#ff88dc', '#ffa94d'];

            // ç™¼å°„æ›´å¤šç…™ç«ï¼ˆå¢åŠ åˆ°5å€‹ï¼‰
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFirework(container, colors);
                }, i * 180);
            }
        }

        function createFirework(container, colors) {
            // éš¨æ©Ÿä½ç½®
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * (window.innerHeight * 0.6) + window.innerHeight * 0.1;

            // éš¨æ©Ÿé¡è‰²
            const color = colors[Math.floor(Math.random() * colors.length)];

            // å‰µå»ºç²’å­ï¼ˆå¢åŠ æ•¸é‡ï¼‰
            const particleCount = 50;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.background = color;
                particle.style.boxShadow = `0 0 10px ${color}`;

                // éš¨æ©Ÿæ–¹å‘
                const angle = (Math.PI * 2 * i) / particleCount;
                const velocity = 50 + Math.random() * 120;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');

                container.appendChild(particle);

                // ç§»é™¤ç²’å­
                setTimeout(() => {
                    particle.remove();
                }, 1200);
            }

            // æ·»åŠ æ›´å¤šé–ƒçˆæ˜Ÿæ˜Ÿ
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.className = 'firework-spark';
                    spark.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
                    spark.style.top = (y + (Math.random() - 0.5) * 100) + 'px';
                    spark.style.color = color;

                    container.appendChild(spark);

                    setTimeout(() => {
                        spark.remove();
                    }, 800);
                }, i * 50);
            }
        }
    </script>
</body>

</html>